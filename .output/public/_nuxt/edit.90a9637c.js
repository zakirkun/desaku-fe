import{_ as b}from"./MediaLibrary.0b1335fb.js";import{c as C,_ as w}from"./RichEditor.client.6ef886bc.js";import{_ as k}from"./Loader.2a51ef4d.js";import{u as y,c,b as n,a as e,w as h,f as l,l as d,F as L,d as V,r,o as i}from"./entry.90403ee7.js";import{c as M}from"./createSlug.32ba2e5c.js";const B=C(w),$={class:"grid animate-fade"},S={class:"col-12"},P={class:"card"},I=e("h3",{class:"text-2xl font-medium mb-5"},"Tambah Perangkat Desa",-1),R={class:"grid grid-cols-1 gap-3"},U={class:"col-span-1"},E={class:"col-span-1 my-3"},O={class:"col-span-1 mb-3"},z={key:0,class:"relative w-fit mt-4"},A=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 48 48"},[e("defs",null,[e("mask",{id:"ipSCloseOne0"},[e("g",{fill:"none","stroke-linejoin":"round","stroke-width":"4"},[e("path",{fill:"#fff",stroke:"#fff",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4S4 12.954 4 24s8.954 20 20 20Z"}),e("path",{stroke:"#000","stroke-linecap":"round",d:"M29.657 18.343L18.343 29.657m0-11.314l11.314 11.314"})])])]),e("path",{fill:"#10B981",d:"M0 0h48v48H0z",mask:"url(#ipSCloseOne0)"})],-1),H=[A],T={class:"my-1"},q=e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.3em",height:"1.3em",viewBox:"0 0 20 20"},[e("path",{fill:"white",d:"M17.125 6.17L15.079.535c-.151-.416-.595-.637-.989-.492L.492 5.006c-.394.144-.593.597-.441 1.013l2.156 5.941V8.777c0-1.438 1.148-2.607 2.56-2.607H8.36l4.285-3.008l2.479 3.008zM19.238 8H4.767a.761.761 0 0 0-.762.777v9.42c.001.444.343.803.762.803h14.471c.42 0 .762-.359.762-.803v-9.42A.761.761 0 0 0 19.238 8M18 17H6v-2l1.984-4.018l2.768 3.436l2.598-2.662l3.338-1.205L18 14z"})]),e("div",{class:"ml-1 font-semibold"},"Media Library")],-1),F={class:"mt-5"},N=e("div",{class:"mb-5"},[e("span",{class:"font-medium text-xl"},"Profil Lembaga")],-1),j={class:"mt-5"},D=e("div",{class:"mb-5"},[e("span",{class:"font-medium text-xl"},"Visi & Misi")],-1),x={class:"mt-5"},K=e("div",{class:"mb-5"},[e("span",{class:"font-medium text-xl"},"Tugas")],-1),Z={key:0,class:"capitalize"},G={data(){return{openMediaLibrary:!1,image:null,renderRichEditor:!1,data:{visi:null,tugas:null,profile:null},jabatan:[],form:{name:null,address:null,surname:null,image:null,visi:null,tugas:null,profile:null,slug:null},loading:!1}},async mounted(){await this.loadData(),this.renderRichEditor=!0},methods:{async loadData(){const a=await $fetch(this.$config.public.API_PUBLIC_URL+"/api/lembaga/"+this.$route.query.id);this.form=a,this.data.tugas=a.tugas,this.data.visi=a.visi,this.data.profile=a.profile},async updateLembaga(){const{valid:a}=await this.$refs.form.validate();a&&(this.loading=!0,this.form.slug=M(this.form.name),await $fetch(this.$config.public.API_PUBLIC_URL+"/api/lembaga/"+this.$route.query.id,{method:"PATCH",headers:{Authorization:"Bearer "+V().token},body:this.form}),this.loading=!1,this.$router.push("/dashboard/lembaga"))},contentChangeVisi(a){this.form.visi=a},contentChangeProfile(a){this.form.profile=a},contentChangeTugas(a){this.form.tugas=a},onImageSelected(a){this.form.image=a}}},ee=Object.assign(G,{__name:"edit",setup(a){return y({title:"Ubah Lembaga"}),(t,s)=>{const g=b,m=r("v-text-field"),p=r("v-img"),f=r("v-btn"),_=r("v-form"),u=B,v=k;return i(),c(L,null,[n(g,{onOnImageSelected:t.onImageSelected,onOnCloseModal:s[0]||(s[0]=o=>t.openMediaLibrary=!1),open:t.openMediaLibrary},null,8,["onOnImageSelected","open"]),e("div",$,[e("div",S,[e("div",P,[I,n(_,{ref:"form"},{default:h(()=>[e("div",R,[e("div",U,[n(m,{rules:[o=>!!o||"Field is required"],modelValue:t.form.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.form.name=o),variant:"outlined","hide-details":"auto",label:"Nama Lembaga"},null,8,["rules","modelValue"])]),e("div",E,[n(m,{rules:[o=>!!o||"Field is required"],modelValue:t.form.surname,"onUpdate:modelValue":s[2]||(s[2]=o=>t.form.surname=o),variant:"outlined","hide-details":"auto",label:"Singkatan Lembaga"},null,8,["rules","modelValue"])]),e("div",O,[n(m,{rules:[o=>!!o||"Field is required"],modelValue:t.form.address,"onUpdate:modelValue":s[3]||(s[3]=o=>t.form.address=o),variant:"outlined","hide-details":"auto",label:"Alamat Kantor"},null,8,["rules","modelValue"])]),t.form.image?(i(),c("div",z,[n(p,{src:t.form.image,width:"300"},null,8,["src"]),e("div",{onClick:s[4]||(s[4]=o=>t.form.image=null),class:"absolute cursor-pointer right-3 top-3 z-50"},H)])):d("",!0),e("div",T,[n(f,{onClick:s[5]||(s[5]=o=>t.openMediaLibrary=!0),color:"#10B981",class:"flex-none text-white px-3"},{default:h(()=>[q]),_:1})])])]),_:1},512),e("div",F,[N,t.renderRichEditor?(i(),l(u,{key:0,data:t.data.profile,onContentChange:t.contentChangeProfile},null,8,["data","onContentChange"])):d("",!0)]),e("div",j,[D,t.renderRichEditor?(i(),l(u,{key:0,data:t.data.visi,onContentChange:t.contentChangeVisi},null,8,["data","onContentChange"])):d("",!0)]),e("div",x,[K,t.renderRichEditor?(i(),l(u,{key:0,data:t.data.tugas,onContentChange:t.contentChangeTugas},null,8,["data","onContentChange"])):d("",!0)]),n(f,{onClick:t.updateLembaga,color:"#10B981",class:"mt-5 text-white px-3 py-2"},{default:h(()=>[t.loading?(i(),l(v,{key:1})):(i(),c("span",Z,"Submit"))]),_:1},8,["onClick"])])])])],64)}}});export{ee as default};
